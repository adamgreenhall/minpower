
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Optimal Power Flow &#8212; minpower  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Unit Commitment" href="unit-commitment.html" />
    <link rel="prev" title="Economic Dispatch" href="economic-dispatch.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24659622-2']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>  

    <div class="document">

      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="optimal-power-flow">
<h1>Optimal Power Flow<a class="headerlink" href="#optimal-power-flow" title="Permalink to this headline">¶</a></h1>
<p><abbr title="Optimal Power Flow">OPF</abbr> tries to allocate available generation to meet the current load while keeping transmission lines within <abbr title="governed in reality by stability and sag concerns">the limits</abbr> of what they can carry. <abbr title="Optimal Power Flow">OPF</abbr> adds a dimension of space to the <abbr title="Economic Dispatch">ED</abbr> problem. Currently <strong>minpower</strong> performs the simplest version of power flow, called decoupled <abbr title="Optimal Power Flow">OPF</abbr> and considers only real power <a class="footnote-reference brackets" href="#f1" id="id1">1</a>. The classic text is <a class="reference external" href="http://bitly.com/bergen-vittal">Bergen &amp; Vittal</a>.</p>
<div class="section" id="the-problem">
<h2>The problem<a class="headerlink" href="#the-problem" title="Permalink to this headline">¶</a></h2>
<div class="optimizationproblem docutils container">
<p><span class="math notranslate nohighlight">\(\min \sum_g C_g(P_g)\)</span></p>
<p><span class="math notranslate nohighlight">\(\mathrm{s.t.} \; P_{\min (g)} \leq P_g \leq P_{\max (g)}  \; \forall  \; \mathrm{generators} \;(g)\)</span></p>
<p><span class="math notranslate nohighlight">\(\mathrm{s.t.} \; P_{\mathrm{gen} (i)} - P_{\mathrm{load} (i)} - \sum_j P_{ij} = 0   \; \forall  \; \mathrm{buses} \;(i)\)</span></p>
<p><span class="math notranslate nohighlight">\(\mathrm{s.t.} \; P_{\min (ij)} \leq P_{ij} \leq P_{\max (ij)} \forall  \; \mathrm{lines} \;(ij)\)</span></p>
</div>
<p>In this mathematical formulation generators are indexed by <span class="math notranslate nohighlight">\(g\)</span>. <span class="math notranslate nohighlight">\(P_g\)</span> is a generator’s power output and <span class="math notranslate nohighlight">\(C_g()\)</span> is its cost function. The objective is to minimize the total cost. There are three constraints:</p>
<ul class="simple">
<li><p>each generator must be within its real power limits</p></li>
<li><p><abbr title="called power balance">inflow must equal outflow</abbr> at each bus</p></li>
<li><p>each line must be within its real power limits</p></li>
</ul>
<p>For <abbr title="De-Coupled Optimal Power Flow">DCOPF</abbr>, the real power flow on a line <span class="math notranslate nohighlight">\(P_{ij} = \frac{1}{X_{ij}} \left( \theta_i-\theta_j \right)\)</span> depends linearly on the voltage angles of the buses it connects (<span class="math notranslate nohighlight">\(\theta_{i}\)</span>, <span class="math notranslate nohighlight">\(\theta_{j}\)</span>) and its own reactance <span class="math notranslate nohighlight">\(X_{ij}\)</span>. Bus angles are the difference in voltage angle between the bus and the <abbr title="known as the swing or slack bus">reference bus</abbr> which has angle <span class="math notranslate nohighlight">\(0^{\circ}\)</span>.</p>
</div>
<div class="section" id="example-problem">
<h2>Example Problem<a class="headerlink" href="#example-problem" title="Permalink to this headline">¶</a></h2>
<p>To define a simple <abbr title="Optimal Power Flow">OPF</abbr> problem, <strong>Minpower</strong> requires three spreadsheets. The first describes the generator parameters and location (<a class="reference external" href="https://github.com/adamgreenhall/minpower/blob/master/minpower/tests/opf/generators.csv">generators.csv</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">,</span><span class="n">bus</span><span class="p">,</span><span class="n">cost</span> <span class="n">curve</span> <span class="n">equation</span>
<span class="n">cheap</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="mi">5</span><span class="n">P</span> <span class="o">+</span> <span class="mf">.01</span><span class="n">P</span><span class="o">^</span><span class="mi">2</span>
<span class="n">mid</span> <span class="n">grade</span><span class="p">,</span><span class="n">Olympia</span><span class="p">,</span><span class="mi">7</span><span class="n">P</span> <span class="o">+</span> <span class="mf">.01</span><span class="n">P</span><span class="o">^</span><span class="mi">2</span>
<span class="n">expensive</span><span class="p">,</span><span class="n">Seattle</span><span class="p">,</span><span class="mi">10</span><span class="n">P</span> <span class="o">+</span> <span class="mf">.01</span><span class="n">P</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
<p>The second describes the load at each bus (<a class="reference external" href="https://github.com/adamgreenhall/minpower/blob/master/minpower/tests/opf/loads.csv">loads.csv</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">,</span><span class="n">bus</span><span class="p">,</span><span class="n">power</span>
<span class="n">UW</span><span class="p">,</span><span class="n">Seattle</span><span class="p">,</span><span class="mi">50</span>
<span class="n">paper</span> <span class="n">mill</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="mi">0</span>
<span class="n">smelter</span><span class="p">,</span><span class="n">Olympia</span><span class="p">,</span><span class="mi">50</span>
</pre></div>
</div>
<p>The third describes the lines between buses (<a class="reference external" href="https://github.com/adamgreenhall/minpower/blob/master/minpower/tests/opf/lines.csv">lines.csv</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bus</span><span class="p">,</span><span class="n">to</span> <span class="n">bus</span><span class="p">,</span><span class="n">Pmax</span>
<span class="n">Seattle</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="mi">3</span>
<span class="n">Olympia</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="mi">10000</span>
<span class="n">Olympia</span><span class="p">,</span><span class="n">Seattle</span><span class="p">,</span><span class="mi">10000</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information about what options you can specify in each spreadsheet see: <a class="reference internal" href="creating-problems.html"><span class="doc">Creating a Problem</span></a>.</p>
</div>
</div>
<div class="section" id="solving">
<h2>Solving<a class="headerlink" href="#solving" title="Permalink to this headline">¶</a></h2>
<p>Save the three spreadsheets above into into a folder (call it <code class="docutils literal notranslate"><span class="pre">mypowerflow</span></code>) and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minpower</span> <span class="n">mypowerflow</span>
</pre></div>
</div>
<p>This particular problem is also <strong>Minpower</strong> built-in test case, so if you haven’t been following along, to solve it, call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minpower</span> <span class="n">opf</span>
</pre></div>
</div>
</div>
<div class="section" id="example-solution">
<h2>Example Solution<a class="headerlink" href="#example-solution" title="Permalink to this headline">¶</a></h2>
<p>The result is a plot (<code class="docutils literal notranslate"><span class="pre">powerflow.png</span></code>):</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/powerflow.png"><img alt="_images/powerflow.png" src="_images/powerflow.png" style="width: 500px;" /></a>
</div></blockquote>
<p><abbr title="Optimal Power Flow">OPF</abbr> is difficult to visualize (please <a class="reference external" href="mailto:minpower&#37;&#52;&#48;adamgreenhall&#46;com">send suggestions</a>).</p>
<ul class="simple">
<li><p>A red colored transmission line indicates a limit on that line, while gray lines are below their limits. <em>The Tacoma</em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em>Seattle line is at its limit. The other two gray colored lines are running below their limits.</em></p></li>
<li><p>The width of the line indicates the amount of power flow. <em>The Olympia-Seattle line has the largest flow</em>.</p></li>
<li><p>The <abbr title="arrows would be nicer, but this is what networkx gives">stubs</abbr> at one end indicate direction of flow. <em>Flow direction is Olympia</em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em>Seattle</em>.</p></li>
<li><p><abbr title="generation minus load for the bus">Injected power</abbr> is shown by the color of the bus. <em>Olympia is injecting power into the system while Seattle is pulling power</em>.</p></li>
</ul>
<p>There are also spreadsheet outputs of generator information (<code class="docutils literal notranslate"><span class="pre">powerflow-generators.csv</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generator</span> <span class="n">name</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">P</span><span class="p">,</span><span class="n">IC</span>
<span class="n">cheap</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">5.0</span>
<span class="n">mid</span> <span class="n">grade</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">58.9999999999996</span><span class="p">,</span><span class="mf">8.179999999999993</span>
<span class="n">expensive</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">41.0000000000003</span><span class="p">,</span><span class="mf">10.820000000000006</span>
</pre></div>
</div>
<p>and line information (<code class="docutils literal notranslate"><span class="pre">powerflow-lines.csv</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">from</span><span class="p">,</span><span class="n">to</span><span class="p">,</span><span class="n">power</span><span class="p">,</span><span class="n">congestion</span> <span class="n">shadow</span> <span class="n">price</span>
<span class="n">Seattle</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="o">-</span><span class="mf">3.0</span><span class="p">,</span>
<span class="n">Olympia</span><span class="p">,</span><span class="n">Tacoma</span><span class="p">,</span><span class="mf">3.00000000000068</span><span class="p">,</span>
<span class="n">Olympia</span><span class="p">,</span><span class="n">Seattle</span><span class="p">,</span><span class="mf">6.00000000000068</span><span class="p">,</span>
</pre></div>
</div>
<p>Each line’s real power flow is output. Lines that have congestion will show a positive shadow price.
<em>Because the flow is Tacoma</em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em>Seattle and the from/to fields of the
spreadsheet are the other way around, we see a negative power flow. The Seattle-Tacoma
line is at its limit, so there is an extra cost to the system from the congestion and the line has a
positive shadow price.</em></p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Modern power systems often have reactive power issues. While <abbr title="Decoupled Optimal Power Flow">DCOPF</abbr> is a decent approximate solution with reactive power considered, your results may vary significantly from real operations without it.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">minpower</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="why-minpower.html">Why Minpower</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic-use.html">Basic Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-problems.html">Creating a Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="students.html">For Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="researchers.html">For Researchers</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="economic-dispatch.html">Economic Dispatch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Optimal Power Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-problem">The problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-problem">Example Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solving">Solving</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-solution">Example Solution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="unit-commitment.html">Unit Commitment</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="collaborate.html">Collaborate</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About minpower</a></li>
</ul>


<div id="searchbox" style="display: none">
  <h3>Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    
  })();
</script>

  </body>
</html>